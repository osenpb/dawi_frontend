<div class="max-w-4xl mx-auto bg-white p-6 rounded shadow">
  <h1 class="text-3xl font-bold mb-6">Editar Hotel</h1>

  <!-- Mensaje de error -->
  <div *ngIf="error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
    {{ error }}
  </div>

  <!-- Indicador de carga -->
  <div *ngIf="loading" class="text-center py-8">
    <p class="text-gray-600">Cargando datos...</p>
  </div>

  <!-- Formulario -->
  <form [formGroup]="hotelForm" (ngSubmit)="onSubmit()" *ngIf="!loading">

    <!-- Nombre -->
    <div class="mb-4">
      <label class="block text-gray-700 font-semibold">Nombre: *</label>
      <input
        type="text"
        formControlName="nombre"
        class="w-full border rounded p-2 mt-1"
        [class.border-red-500]="hotelForm.get('nombre')?.invalid && hotelForm.get('nombre')?.touched"
        placeholder="Nombre del hotel">
      <span *ngIf="hotelForm.get('nombre')?.invalid && hotelForm.get('nombre')?.touched"
            class="text-red-500 text-sm">
        El nombre es requerido
      </span>
    </div>

    <!-- DirecciÃ³n -->
    <div class="mb-4">
      <label class="block text-gray-700 font-semibold">DirecciÃ³n: *</label>
      <input
        type="text"
        formControlName="direccion"
        class="w-full border rounded p-2 mt-1"
        [class.border-red-500]="hotelForm.get('direccion')?.invalid && hotelForm.get('direccion')?.touched">
      <span *ngIf="hotelForm.get('direccion')?.invalid && hotelForm.get('direccion')?.touched"
            class="text-red-500 text-sm">
        La direcciÃ³n es requerida
      </span>
    </div>

    <!-- Departamento -->
    <div class="mb-6">
      <label class="block text-gray-700 font-semibold">Departamento: *</label>
      <select
        formControlName="departamento"
        class="w-full border rounded p-2 mt-1"
        [class.border-red-500]="hotelForm.get('departamento')?.invalid && hotelForm.get('departamento')?.touched">
        <option value="">Selecciona un departamento</option>
        <option *ngFor="let d of departamentos" [value]="d.id">
          {{ d.nombre }}
        </option>
      </select>
      <span *ngIf="hotelForm.get('departamento')?.invalid && hotelForm.get('departamento')?.touched"
            class="text-red-500 text-sm">
        El departamento es requerido
      </span>
    </div>

    <!-- Habitaciones -->
    <h2 class="text-2xl font-semibold mb-4">Habitaciones</h2>

    <div formArrayName="habitaciones">
      <div *ngFor="let hab of habitaciones.controls; let i = index"
           [formGroupName]="i"
           class="border rounded p-4 mb-4 bg-gray-50">

        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <!-- NÃºmero -->
          <div>
            <label class="block font-semibold text-sm">NÃºmero: *</label>
            <input
              type="text"
              formControlName="numero"
              class="w-full border rounded p-2 mt-1"
              placeholder="Ej: 101">
          </div>

          <!-- Estado -->
          <div>
            <label class="block font-semibold text-sm">Estado: *</label>
            <select formControlName="estado" class="w-full border rounded p-2 mt-1">
              <option value="DISPONIBLE">Disponible</option>
              <option value="OCUPADA">Ocupada</option>
              <option value="MANTENIMIENTO">Mantenimiento</option>
            </select>
          </div>

          <!-- Precio -->
          <div>
            <label class="block font-semibold text-sm">Precio: *</label>
            <input
              type="number"
              formControlName="precio"
              class="w-full border rounded p-2 mt-1"
              min="0"
              step="0.01"
              placeholder="0.00">
          </div>

          <!-- Tipo HabitaciÃ³n -->
          <div>
            <label class="block font-semibold text-sm">Tipo: *</label>
            <select formControlName="tipoHabitacion" class="w-full border rounded p-2 mt-1">
              <option value="">Selecciona tipo</option>
              <option *ngFor="let tipo of tiposHabitacion" [value]="tipo.id">
                {{ tipo.nombre }}
              </option>
            </select>
          </div>


        </div>

        <!-- BotÃ³n Eliminar -->
        <button
          type="button"
          (click)="removeHabitacion(i)"
          class="mt-4 bg-red-500 text-white px-4 py-1 rounded hover:bg-red-600 transition">
          ğŸ—‘ï¸ Eliminar
        </button>
      </div>

      <!-- Mensaje si no hay habitaciones -->
      <div *ngIf="habitaciones.length === 0" class="text-gray-500 text-center py-4 border-2 border-dashed rounded">
        No hay habitaciones. AÃ±ade al menos una.
      </div>
    </div>

    <!-- AÃ±adir HabitaciÃ³n -->
    <button
      type="button"
      (click)="addHabitacion()"
      class="mb-6 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition">
      â• AÃ±adir HabitaciÃ³n
    </button>

    <!-- Guardar -->
    <button
      type="submit"
      [disabled]="hotelForm.invalid"
      class="w-full bg-green-600 text-white py-3 rounded hover:bg-green-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed">
      ğŸ’¾ Guardar Hotel
    </button>
  </form>
</div>
